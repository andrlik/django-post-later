{% extends "post_later/app_base.html" %}
{% load i18n %}
{% block extratitle %}{% translate "Account List" %} - {% endblock %}
{% block content %}
<h1>{% translate "Your accounts" %}</h1>
<table>
  <caption>{% translate "Showing" %} {{ page_obj|length }} {% translate "of" %} {{ page_obj.paginator.object_list.count }}</caption>
  <thead>
    <tr>
      <th scope="col">{% translate "Account Type" %}</th>
      <th scope="col">{% translate "Account User" %}</th>
      <th scope="col">{% translate "Account Status" %}</th>
    </tr>
  </thead>
  <tbody>
    {% for account in accounts %}
    <tr>
      <td>{{ account.get_account_type_display }}</td>
      <td>{% if account.avatar_url %}<img src={{ account.avatar_url }} height=20 width=20 alt="User avatar" />&nbsp;{% endif %}<a href="{% url 'post_later:account_detail' id=account.id %}">{% if account.username %}{{ account.username }}{% else %}{% translate "Awaiting data from remote service" %}{% endif %}</a></td>
      <td>{{ account.get_account_status_display }}</td>
    </tr>
    {% empty %}
    <tr>
      <td></td>
      <td>{% translate "No accounts found!" %}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
<p><a href="{% url 'post_later:account_create' %}">{% translate "Link new account" %}</a></p>
{% if page_obj.has_other_pages %}
<nav aria-label="Page navigation">
  <ul class="pagination">
    {% if page_obj.has_previous %}
    <li><a href="?page=1">&laquo; {% trans "First" %}</a></li>
    <li><a href="?page={{ page_obj.previous_page_number }}">{{ page_obj.previous_page_number }}</a></li>
    {% endif %}
    <li aria-current="page"><a href="#">{{ page_obj.number }}</a></li>
    {% if page_obj.has_next %}
    <li><a href="?page={{ page_obj.next_page_number }}">{{ page_obj.next_page_number }}</a></li>
    <li><a href="?page={{ page_obj.paginator.num_pages }}">{% translate "Last" %}</a></li>
    {% endif %}
  </ul>
</nav>
{% endif %}
{% endblock %}
